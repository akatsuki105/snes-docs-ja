# ソースコードについて

ソースコードのある`/bsnes`は次のようなディレクトリ構造になっています。

```sh
.
├── Database
├── Locale
├── emulator
├── filter
├── gb
├── heuristics
├── lzma
├── obj
├── out
├── processor
├── sfc
├── target-bsnes
└── target-libretro
```

- `Database`: ここには、ゲームが期待する回路基板を把握するためにbsnesが使用するデータベースと、既製のゲームチートのデータベースが含まれています。
- `emulator`: `sfc`のエミュレーション実装のコアのインターフェイスが含まれています。
  - これは higan v106 に由来するものです。higanはさまざまなエミュレータを内蔵したマルチエミュレータで同じインターフェイスを実装した多くのエミュレーションコアがあります。bsnesには1つしかありませんが、このインターフェースは良い抽象化であるため、ここに残っています。
- `filter`: CPUによる画像のスケーリング処理(HQ2x, SuperEagleなど)が実装されています。
- `gb`: ここにはSGBのエミュレーションのためにSameBoyのコアがあります。
- `heuristics`: ここには、`Database`にゲームが見つからない場合に、特定のゲームが期待するメモリマップや、追加のハードウェアを推測するロジックが含まれています。
- `Locale`: ここには、bsnesがユーザーインターフェースを別の言語で表示するために使用する翻訳データベースが含まれています。
- `lzma`: `.7z`を処理できるように 7-Zip SDK が入っています。
- `processor`: bsnesがエミュレートするハードウェアが使用するすべてのCPUエミュレーションコアが含まれています。
  - これもhigan v106の名残で、サポートされているシステムがたまたま同じモデルのCPUを使用していたため、CPUエミュレーションコアはシステムに依存していません。
- `sfc`: SNESのエミュレーションのためのコードが含まれています。
- `target-bsnes`: 通常のbsnesのインターフェイス(フロントエンド)のコードがあります。
- `target-libretro`: libretro用のインターフェイス(フロントエンド)のコードがあります。libretro APIを満たしています。

