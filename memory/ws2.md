# ウェイトステート2

メモリアドレスの`0x80xxxx..0xFFxxxx`は基本的に、`0x00xxxx..0x7Fxxxx`のミラーです。

ただし、メモリの動作速度が異なるため、CPUがメモリアクセスに要する時間(ウェイトステート)が異なります。

`0x00xxxx..0x7Fxxxx`へのウェイトステートはウェイトステート1(ws1), `0x80xxxx..0xFFxxxx`へのウェイトステートはウェイトステート2(ws2)と呼ばれます。

ウェイトステート1 は 2.68MHz に固定されていますが、ウェイトステート2 は 2.68MHz と 3.58MHz の動作速度のどちらかを選ぶことができます。  
3.58MHz の場合、ウェイトステート1 より高速にメモリにアクセスできますが、要求されるカートリッジのスペックも高くなるため、カートリッジの値段も高くなると思われます。(実際に値段が違ったかは要調査)

## 420Dh - MEMSEL - WS2制御レジスタ (W)

 bit | 内容
---- | ----
0 | WS2領域のアクセスに要するサイクル (0=2.68MHz, 1=3.58MHz)
1-7 | 不使用

リセット時にbit0は0に設定されます。

WS2領域は、バンク`80h..BFh`のアドレス`8000h..FFFFh`と、バンク`C0h..FFh`のアドレス`0000h..FFFFh`で構成されています。

3.58MHzの高速メモリは120ns以上のROM/EPROMが必要です。2.68MHzのメモリは、200ns以上のROM/EPROMが必要です。

```
  2.684658 MHz = 21.47727 MHz / 8     ; WRAMと同じ速度でアクセス可能
  3.579545 MHz = 21.47727 MHz / 6     ; WRAMよりアクセスが高速
```

3.58MHzの設定を使用するプログラムは、カートリッジのヘッダの`[FFD5h].4`にその旨を記載してください。
